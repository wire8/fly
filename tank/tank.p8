pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
top = 2
right = 1
bottom = 3
left = 0

function _init()
  make_player()
  make_bullet()
end

function _update()
  move_player()
  move_bullet()
  fire()
end

function _draw()
  cls()
  draw_player()
  draw_bullet()
end

function make_player()
  player={}
  player.x=5
  player.y=50
  player.direction=top
  player.sprite=0
  player.alive=true
end

function make_bullet()
  bullet={}
  bullet.x=0
  bullet.y=0
  bullet.sprite=1
  bullet.direction=player.direction
  bullet.alive=false
end

function draw_player()
  spr(player.sprite,player.x,player.y)
end

function draw_bullet()
  if (bullet.alive) then
    spr(bullet.sprite,bullet.x,bullet.y)
  end
end

function move_player()
  if (btn(left)) then
    player.x-=1
    player.direction = left
  elseif (btn(right)) then
    player.x+=1
    player.direction = right
  elseif (btn(top)) then
    player.y-=1
    player.direction = top
  elseif (btn(bottom)) then
    player.y+=1
    player.direction = bottom
  end
end

function move_bullet()
  if (bullet.x > 128 or bullet.x < 0 or
      bullet.y > 128 or bullet.y <0) then
    bullet.alive = false
  end

  if (bullet.alive) then
    if (bullet.direction == top) bullet.y -= 1
    if (bullet.direction == bottom) bullet.y += 1
    if (bullet.direction == left) bullet.x -= 1
    if (bullet.direction == right) bullet.x += 1
  end
end

function fire()
  if (btn(4) and not bullet.alive) then
    bullet.alive=true
    bullet.x = player.x
    bullet.y = player.y - 5
    bullet.direction = player.direction
  end
end

__gfx__
00066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05666650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05666650000560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05666650000650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05666650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05666650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000b0500c0500c0500a0500c0500b050090500b0500b050080500c0500d0500e0500f050060501d0500f050060501335011350050500f0500f05022050050500f0500f05035050030503f0500000000000
001000002635025350243502435023350233502335023350233502435024350243502435024350243502435024350243502535025350263502635026350273502735027350273502735027350273502735027350
001000001175011750000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000002635026350263502635026350263500000026350000002635000000263500000000000000002635000000000002635000000000002635000000000002635000000000000000000000000000000025350
__music__
03 00014344

